---
title: 工具
description: 在线小工具
hide_table_of_contents: true
---

import React, {useEffect, useMemo, useState} from 'react';
import Heading from '@theme/Heading';

import toolsData from './tools.json';

import TimestampTool from './timestamp';
import JsonTool from './json';
import ColorPickerTool from './color-picker';
import RegexBuilderTool from './regex-builder';
import GpaTool from './gpa';
import PostgradTool from './postgrad';

export function ToolPage() {
  const tools = Array.isArray(toolsData?.tools) ? toolsData.tools : [];
  const toolById = useMemo(() => new Map(tools.map((t) => [t.id, t])), [tools]);

  const toolComponents = useMemo(
    () => ({
      timestamp: <TimestampTool />,
      json: <JsonTool />,
      'color-picker': <ColorPickerTool />,
      'regex-builder': <RegexBuilderTool />,
      gpa: <GpaTool />,
      postgrad: <PostgradTool />,
    }),
    []
  );

  const defaultId = tools[0]?.id || 'timestamp';
  const [activeId, setActiveId] = useState(defaultId);

  // 支持 hash 直达：/tool#json
  useEffect(() => {
    if (typeof window === 'undefined') return;
    const hash = decodeURIComponent(window.location.hash || '').replace(/^#/, '').trim();
    if (hash && toolById.has(hash)) setActiveId(hash);
  }, [toolById]);

  useEffect(() => {
    if (typeof window === 'undefined') return;
    if (!activeId) return;
    window.history.replaceState(null, '', `#${encodeURIComponent(activeId)}`);
  }, [activeId]);

  const activeTool = toolById.get(activeId);

  return (
    <div className="container margin-vert--lg">
      <div style={{display: 'flex', alignItems: 'baseline', justifyContent: 'space-between', gap: 14, flexWrap: 'wrap'}}>
        <div>
          <Heading as="h1" style={{marginBottom: 6}}>实用工具</Heading>
        </div>
      </div>

      <div className="toolLayout">
        {/* Sidebar */}
        <aside className="toolSidebar">
          <div className="toolSidebarList">
            {tools.map((t) => {
              const isActive = t.id === activeId;
              return (
                <button
                  key={t.id}
                  onClick={() => setActiveId(t.id)}
                  className={`toolItem ${isActive ? 'isActive' : ''}`}
                  type="button"
                >
                  <div className="toolItemName">{t.name}</div>
                  <div className="toolItemTagline">{t.tagline}</div>
                </button>
              );
            })}
          </div>
        </aside>

        {/* Fixed Renderer */}
        <section style={{flex: 1, minWidth: 0}}>
          <div className="card toolStage">
            <div className="toolStageHeader">
              <div style={{fontWeight: 650}}>
                {activeTool?.name || '工具'}
              </div>
              <div style={{opacity: 0.55, fontSize: '0.9rem'}}>
                #{activeId}
              </div>
            </div>
            <div className="toolStageBody">
              {toolComponents[activeId] || (
                <div style={{padding: 18, opacity: 0.75}}>
                  暂无该工具组件（占位）。
                </div>
              )}
            </div>
          </div>
        </section>
      </div>

      <style>{`
        .toolLayout{
          display:flex;
          gap:22px;
          margin-top:22px;
          align-items:flex-start;
        }
        .toolSidebar{
          width:280px;
          flex-shrink:0;
          position:sticky;
          top:76px;
          align-self:flex-start;
        }
        .toolSidebarTitle{
          font-size:.78rem;
          font-weight:700;
          letter-spacing:1.5px;
          opacity:.45;
          margin-bottom:12px;
        }
        .toolSidebarList{display:flex;flex-direction:column;gap:8px;}
        .toolItem{
          border:1px solid var(--ifm-color-emphasis-200);
          background:var(--ifm-card-background-color);
          border-radius:12px;
          padding:12px 12px;
          cursor:pointer;
          text-align:left;
          transition:background .15s,border-color .15s,transform .15s;
        }
        .toolItem:hover{transform:translateY(-1px);border-color:var(--ifm-color-emphasis-300);}
        .toolItem.isActive{
          background:var(--ifm-color-emphasis-200);
          border-color:var(--ifm-color-emphasis-300);
        }
        .toolItemName{font-weight:650;line-height:1.2;}
        .toolItemTagline{opacity:.6;font-size:.88rem;margin-top:4px;line-height:1.35;}
        .toolStage{
          border-radius:14px;
          border:1px solid var(--ifm-color-emphasis-200);
          overflow:hidden;
        }
        .toolStageHeader{
          padding:14px 18px;
          border-bottom:1px solid var(--ifm-color-emphasis-200);
          display:flex;
          align-items:center;
          justify-content:space-between;
          gap:12px;
        }
        .toolStageBody{
          min-height:520px;
          height:auto;
          overflow:visible;
          background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0));
        }
        @media (max-width: 996px){
          .toolLayout{flex-direction:column;}
          .toolSidebar{position:static;width:100%;}
        }
      `}</style>
    </div>
  );
}

<ToolPage />
