"use strict";(globalThis.webpackChunksoft_where=globalThis.webpackChunksoft_where||[]).push([[8510],{6464(e,n,d){d.r(n),d.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>x,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"\u5e38\u7528\u6307\u4ee4/docker","title":"Docker","description":"Docker\u5e38\u7528\u6307\u4ee4","source":"@site/docs/\u5e38\u7528\u6307\u4ee4/docker.mdx","sourceDirName":"\u5e38\u7528\u6307\u4ee4","slug":"/\u5e38\u7528\u6307\u4ee4/docker","permalink":"/docs/\u5e38\u7528\u6307\u4ee4/docker","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Docker","sidebar_position":3,"hide_table_of_contents":false,"description":"Docker\u5e38\u7528\u6307\u4ee4"},"sidebar":"tutorialSidebar","previous":{"title":"OS","permalink":"/docs/\u5e38\u7528\u6307\u4ee4/OS"},"next":{"title":"Git \u5907\u5fd8\u6e05\u5355","permalink":"/docs/\u5e38\u7528\u6307\u4ee4/Git/Git\u5907\u5fd8\u6e05\u5355"}}');var s=d(4848),c=d(8453);const t={title:"Docker",sidebar_position:3,hide_table_of_contents:!1,description:"Docker\u5e38\u7528\u6307\u4ee4"},l=void 0,i={},o=[{value:"\u955c\u50cf\u7ba1\u7406",id:"\u955c\u50cf\u7ba1\u7406",level:2},{value:"\u5bb9\u5668\u7ba1\u7406",id:"\u5bb9\u5668\u7ba1\u7406",level:2},{value:"Docker Compose",id:"docker-compose",level:2},{value:"\u7f51\u7edc\u4e0e\u6570\u636e\u5377",id:"\u7f51\u7edc\u4e0e\u6570\u636e\u5377",level:2},{value:"\u7cfb\u7edf\u6e05\u7406",id:"\u7cfb\u7edf\u6e05\u7406",level:2}];function h(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u955c\u50cf\u7ba1\u7406",children:"\u955c\u50cf\u7ba1\u7406"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u6307\u4ee4"}),(0,s.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker images"})}),(0,s.jsx)(n.td,{children:"\u5217\u51fa\u672c\u5730\u6240\u6709\u955c\u50cf"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker pull <\u955c\u50cf\u540d>:<\u6807\u7b7e>"})}),(0,s.jsx)(n.td,{children:"\u62c9\u53d6\u955c\u50cf"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker build -t <\u955c\u50cf\u540d>:<\u6807\u7b7e> ."})}),(0,s.jsx)(n.td,{children:"\u6839\u636e Dockerfile \u6784\u5efa\u955c\u50cf"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker rmi <\u955c\u50cfID>"})}),(0,s.jsx)(n.td,{children:"\u5220\u9664\u955c\u50cf"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker tag <\u955c\u50cf\u540d> <\u65b0\u6807\u7b7e>"})}),(0,s.jsx)(n.td,{children:"\u7ed9\u955c\u50cf\u6253\u6807\u7b7e"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker push <\u955c\u50cf\u540d>:<\u6807\u7b7e>"})}),(0,s.jsx)(n.td,{children:"\u63a8\u9001\u955c\u50cf\u5230\u4ed3\u5e93"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u62c9\u53d6 nginx \u6700\u65b0\u7248\u955c\u50cf\ndocker pull nginx:latest\n\n# \u67e5\u770b\u672c\u5730\u6240\u6709\u955c\u50cf\ndocker images\n\n# \u57fa\u4e8e\u5f53\u524d\u76ee\u5f55\u7684 Dockerfile \u6784\u5efa\u955c\u50cf\uff0c\u547d\u540d\u4e3a myapp\uff0c\u6807\u7b7e\u4e3a v1.0\ndocker build -t myapp:v1.0 .\n\n# \u7ed9\u955c\u50cf\u6253\u6807\u7b7e\uff0c\u51c6\u5907\u63a8\u9001\u5230\u79c1\u6709\u4ed3\u5e93\ndocker tag myapp:v1.0 registry.example.com/myapp:v1.0\n\n# \u63a8\u9001\u955c\u50cf\u5230\u4ed3\u5e93\ndocker push registry.example.com/myapp:v1.0\n\n# \u5220\u9664\u672c\u5730\u955c\u50cf\ndocker rmi myapp:v1.0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5bb9\u5668\u7ba1\u7406",children:"\u5bb9\u5668\u7ba1\u7406"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u6307\u4ee4"}),(0,s.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker ps"})}),(0,s.jsx)(n.td,{children:"\u5217\u51fa\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker ps -a"})}),(0,s.jsx)(n.td,{children:"\u5217\u51fa\u6240\u6709\u5bb9\u5668\uff08\u542b\u5df2\u505c\u6b62\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker run -d --name <\u540d\u79f0> <\u955c\u50cf>"})}),(0,s.jsx)(n.td,{children:"\u540e\u53f0\u8fd0\u884c\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker run -it <\u955c\u50cf> /bin/bash"})}),(0,s.jsx)(n.td,{children:"\u4ea4\u4e92\u5f0f\u8fd0\u884c\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker run -p <\u4e3b\u673a\u7aef\u53e3>:<\u5bb9\u5668\u7aef\u53e3> <\u955c\u50cf>"})}),(0,s.jsx)(n.td,{children:"\u7aef\u53e3\u6620\u5c04\u8fd0\u884c\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker run -v <\u4e3b\u673a\u8def\u5f84>:<\u5bb9\u5668\u8def\u5f84> <\u955c\u50cf>"})}),(0,s.jsx)(n.td,{children:"\u6302\u8f7d\u5377\u8fd0\u884c\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker start <\u5bb9\u5668ID>"})}),(0,s.jsx)(n.td,{children:"\u542f\u52a8\u5df2\u505c\u6b62\u7684\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker stop <\u5bb9\u5668ID>"})}),(0,s.jsx)(n.td,{children:"\u505c\u6b62\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker restart <\u5bb9\u5668ID>"})}),(0,s.jsx)(n.td,{children:"\u91cd\u542f\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker rm <\u5bb9\u5668ID>"})}),(0,s.jsx)(n.td,{children:"\u5220\u9664\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker exec -it <\u5bb9\u5668ID> /bin/bash"})}),(0,s.jsx)(n.td,{children:"\u8fdb\u5165\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker logs <\u5bb9\u5668ID>"})}),(0,s.jsx)(n.td,{children:"\u67e5\u770b\u5bb9\u5668\u65e5\u5fd7"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker logs -f <\u5bb9\u5668ID>"})}),(0,s.jsx)(n.td,{children:"\u5b9e\u65f6\u8ddf\u8e2a\u5bb9\u5668\u65e5\u5fd7"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u540e\u53f0\u8fd0\u884c\u4e00\u4e2a nginx \u5bb9\u5668\uff0c\u5c06\u4e3b\u673a 8080 \u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u5668 80 \u7aef\u53e3\ndocker run -d --name my-nginx -p 8080:80 nginx:latest\n\n# \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\ndocker ps\n\n# \u8fdb\u5165\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u5185\u90e8\ndocker exec -it my-nginx /bin/bash\n\n# \u67e5\u770b\u5bb9\u5668\u5b9e\u65f6\u65e5\u5fd7\ndocker logs -f my-nginx\n\n# \u6302\u8f7d\u672c\u5730\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d\uff08\u5c06\u672c\u5730 ./html \u6302\u8f7d\u5230 nginx \u7684\u7f51\u9875\u76ee\u5f55\uff09\ndocker run -d --name web \\\n  -p 8080:80 \\\n  -v ./html:/usr/share/nginx/html \\\n  nginx:latest\n\n# \u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\ndocker stop my-nginx\ndocker rm my-nginx\n\n# \u4ea4\u4e92\u5f0f\u8fd0\u884c Ubuntu \u5bb9\u5668\uff0c\u9000\u51fa\u540e\u81ea\u52a8\u5220\u9664\ndocker run -it --rm ubuntu:22.04 /bin/bash\n"})}),"\n",(0,s.jsx)(n.h2,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u6307\u4ee4"}),(0,s.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker compose up -d"})}),(0,s.jsx)(n.td,{children:"\u540e\u53f0\u542f\u52a8\u6240\u6709\u670d\u52a1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker compose down"})}),(0,s.jsx)(n.td,{children:"\u505c\u6b62\u5e76\u79fb\u9664\u6240\u6709\u670d\u52a1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker compose ps"})}),(0,s.jsx)(n.td,{children:"\u67e5\u770b\u670d\u52a1\u72b6\u6001"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker compose logs"})}),(0,s.jsx)(n.td,{children:"\u67e5\u770b\u670d\u52a1\u65e5\u5fd7"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker compose build"})}),(0,s.jsx)(n.td,{children:"\u6784\u5efa\u670d\u52a1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker compose restart"})}),(0,s.jsx)(n.td,{children:"\u91cd\u542f\u670d\u52a1"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u793a\u4f8b ",(0,s.jsx)(n.code,{children:"docker-compose.yml"}),"\uff1a"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# \u4e00\u4e2a\u5305\u542b Web \u5e94\u7528\u548c\u6570\u636e\u5e93\u7684\u5178\u578b\u914d\u7f6e\nservices:\n  web:\n    image: nginx:latest\n    ports:\n      - "8080:80"\n    volumes:\n      - ./html:/usr/share/nginx/html\n    depends_on:\n      - db\n\n  db:\n    image: mysql:8.0\n    environment:\n      MYSQL_ROOT_PASSWORD: my-secret-pw\n      MYSQL_DATABASE: myapp\n    volumes:\n      - db-data:/var/lib/mysql\n\nvolumes:\n  db-data:\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u540e\u53f0\u542f\u52a8\u6240\u6709\u670d\u52a1\ndocker compose up -d\n\n# \u67e5\u770b\u5404\u670d\u52a1\u8fd0\u884c\u72b6\u6001\ndocker compose ps\n\n# \u67e5\u770b web \u670d\u52a1\u7684\u65e5\u5fd7\ndocker compose logs web\n\n# \u4ec5\u91cd\u65b0\u6784\u5efa\u5e76\u542f\u52a8 web \u670d\u52a1\ndocker compose up -d --build web\n\n# \u505c\u6b62\u6240\u6709\u670d\u52a1\u5e76\u79fb\u9664\u5bb9\u5668\u548c\u7f51\u7edc\ndocker compose down\n\n# \u505c\u6b62\u6240\u6709\u670d\u52a1\u5e76\u540c\u65f6\u5220\u9664\u6570\u636e\u5377\uff08\u26a0\ufe0f \u614e\u7528\uff0c\u4f1a\u4e22\u5931\u6570\u636e\uff09\ndocker compose down -v\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7f51\u7edc\u4e0e\u6570\u636e\u5377",children:"\u7f51\u7edc\u4e0e\u6570\u636e\u5377"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u6307\u4ee4"}),(0,s.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker network ls"})}),(0,s.jsx)(n.td,{children:"\u5217\u51fa\u6240\u6709\u7f51\u7edc"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker network create <\u7f51\u7edc\u540d>"})}),(0,s.jsx)(n.td,{children:"\u521b\u5efa\u7f51\u7edc"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker volume ls"})}),(0,s.jsx)(n.td,{children:"\u5217\u51fa\u6240\u6709\u6570\u636e\u5377"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker volume create <\u5377\u540d>"})}),(0,s.jsx)(n.td,{children:"\u521b\u5efa\u6570\u636e\u5377"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker volume rm <\u5377\u540d>"})}),(0,s.jsx)(n.td,{children:"\u5220\u9664\u6570\u636e\u5377"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u81ea\u5b9a\u4e49\u7f51\u7edc\ndocker network create my-network\n\n# \u5c06\u4e24\u4e2a\u5bb9\u5668\u52a0\u5165\u540c\u4e00\u7f51\u7edc\uff0c\u4f7f\u5b83\u4eec\u53ef\u4ee5\u4e92\u76f8\u901a\u4fe1\ndocker run -d --name app --network my-network myapp:latest\ndocker run -d --name db --network my-network mysql:8.0\n\n# \u67e5\u770b\u7f51\u7edc\u8be6\u60c5\uff08\u53ef\u4ee5\u770b\u5230\u54ea\u4e9b\u5bb9\u5668\u8fde\u63a5\u5230\u4e86\u8fd9\u4e2a\u7f51\u7edc\uff09\ndocker network inspect my-network\n\n# \u521b\u5efa\u6570\u636e\u5377\u5e76\u6302\u8f7d\u5230\u5bb9\u5668\ndocker volume create my-data\ndocker run -d --name db -v my-data:/var/lib/mysql mysql:8.0\n\n# \u67e5\u770b\u6240\u6709\u6570\u636e\u5377\ndocker volume ls\n\n# \u5220\u9664\u4e0d\u518d\u4f7f\u7528\u7684\u6570\u636e\u5377\ndocker volume rm my-data\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7cfb\u7edf\u6e05\u7406",children:"\u7cfb\u7edf\u6e05\u7406"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u6307\u4ee4"}),(0,s.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker system df"})}),(0,s.jsx)(n.td,{children:"\u67e5\u770b Docker \u78c1\u76d8\u5360\u7528"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker system prune"})}),(0,s.jsx)(n.td,{children:"\u6e05\u7406\u672a\u4f7f\u7528\u7684\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u955c\u50cf"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker system prune -a"})}),(0,s.jsx)(n.td,{children:"\u6e05\u7406\u6240\u6709\u672a\u4f7f\u7528\u8d44\u6e90\uff08\u542b\u672a\u5f15\u7528\u955c\u50cf\uff09"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b Docker \u5404\u7c7b\u8d44\u6e90\u7684\u78c1\u76d8\u5360\u7528\u60c5\u51b5\ndocker system df\n\n# \u6e05\u7406\u5df2\u505c\u6b62\u7684\u5bb9\u5668\u3001\u672a\u4f7f\u7528\u7684\u7f51\u7edc\u548c\u60ac\u7a7a\u955c\u50cf\uff08\u4f1a\u63d0\u793a\u786e\u8ba4\uff09\ndocker system prune\n\n# \u6e05\u7406\u6240\u6709\u672a\u4f7f\u7528\u7684\u8d44\u6e90\uff0c\u5305\u62ec\u672a\u88ab\u4efb\u4f55\u5bb9\u5668\u5f15\u7528\u7684\u955c\u50cf\uff08\u26a0\ufe0f \u91ca\u653e\u7a7a\u95f4\u8f83\u5927\uff0c\u614e\u7528\uff09\ndocker system prune -a\n\n# \u8df3\u8fc7\u786e\u8ba4\u76f4\u63a5\u6e05\u7406\ndocker system prune -a -f\n"})})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,n,d){d.d(n,{R:()=>t,x:()=>l});var r=d(6540);const s={},c=r.createContext(s);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);