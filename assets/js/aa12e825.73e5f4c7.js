"use strict";(globalThis.webpackChunksoft_where=globalThis.webpackChunksoft_where||[]).push([[2112],{5074(e,i,r){r.r(i),r.d(i,{default:()=>c});var t=r(6540),o=r(4848);const s={id:1,course:"\u8bfe\u7a0b1",credits:"3",scoreType:"percent",score:"90"},n=[{label:"\u4f18\u79c0",value:"excellent"},{label:"\u826f\u597d",value:"good"},{label:"\u4e2d\u7b49",value:"medium"},{label:"\u53ca\u683c",value:"pass"},{label:"\u4e0d\u53ca\u683c",value:"fail"}];function d(e,i,r){return Number.isNaN(e)?i:Math.min(r,Math.max(i,e))}function a(e){if(!Number.isFinite(e))return 0;if(e<60)return 0;const i=d(e,60,100);return d(4-3*Math.pow(100-i,2)/1600,0,4)}function l(e,i=2){return Number.isFinite(e)?e.toFixed(i):"-"}function c(){const[e,i]=(0,t.useState)([s]),[r,d]=(0,t.useState)(!1),[c,p]=(0,t.useState)({x:0,y:0}),u=(0,t.useRef)({dragging:!1,offsetX:0,offsetY:0}),f=(0,t.useMemo)(()=>Array.from({length:41},(e,i)=>100-i),[]);(0,t.useEffect)(()=>{if("undefined"!=typeof window)try{const e=window.localStorage.getItem("tool:gpa:rows");if(!e)return;const r=JSON.parse(e);Array.isArray(r)&&r.length&&i(r)}catch(e){}},[]),(0,t.useEffect)(()=>{if("undefined"!=typeof window)try{window.localStorage.setItem("tool:gpa:rows",JSON.stringify(e))}catch(i){}},[e]),(0,t.useEffect)(()=>{if(r)return window.addEventListener("mousemove",e),window.addEventListener("mouseup",i),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i)};function e(e){u.current.dragging&&p({x:e.clientX-u.current.offsetX,y:e.clientY-u.current.offsetY})}function i(){u.current.dragging=!1}},[r]);const x=(0,t.useMemo)(()=>{const i=e.map(e=>{const i=Number(e.credits),r=Number.isFinite(i)&&i>0?i:0;let t=0,o=!0,s="";if("percent"===e.scoreType){const i=Number(e.score);t=Number.isFinite(i)?i<60?0:a(i):0}else"five"===e.scoreType?(o=!1,s="\u4e94\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206"):(o=!1,s="\u4e8c\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206");const n=o?t*r:0;return{...e,credits:r,gp:t,include:o,qualityPoints:n,note:s}});let r=0,t=0;return i.forEach(e=>{e.include&&(r+=e.credits,t+=e.qualityPoints)}),{rows:i,totalCredits:r,totalQualityPoints:t,average:r>0?t/r:0}},[e]);function g(e,r){i(i=>i.map(i=>i.id===e?{...i,...r}:i))}return(0,o.jsxs)("div",{style:{padding:18},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"flex-start",marginBottom:6},children:[(0,o.jsx)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:(0,o.jsx)("button",{type:"button",className:"button button--primary",onClick:function(){i(e=>{const i=e.length?Math.max(...e.map(e=>e.id))+1:1;return[...e,{...s,id:i,course:`\u8bfe\u7a0b${i}`}]})},children:"\u6dfb\u52a0\u8bfe\u7a0b"})}),(0,o.jsx)("button",{type:"button",onClick:()=>d(e=>!e),"aria-label":"GPA \u5bf9\u7167\u8868",style:{width:28,height:28,borderRadius:999,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",cursor:"pointer",fontWeight:700,lineHeight:"24px",padding:0},children:"?"})]}),(0,o.jsx)("div",{style:{display:"grid",gap:8,marginTop:-4},children:x.rows.map(r=>(0,o.jsxs)("div",{style:{border:"1px solid var(--ifm-color-emphasis-200)",borderRadius:12,padding:8,display:"grid",gap:6},children:[(0,o.jsxs)("div",{style:{display:"grid",gap:8,gridTemplateColumns:"minmax(140px, 1.2fr) minmax(80px, 0.7fr) minmax(130px, 1fr) minmax(150px, 1.2fr)"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.8rem",opacity:.6,marginBottom:0},children:"\u8bfe\u7a0b\u540d"}),(0,o.jsx)("input",{value:r.course,onChange:e=>g(r.id,{course:e.target.value}),placeholder:`\u8bfe\u7a0b${r.id}`,style:{width:"100%",padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.8rem",opacity:.6,marginBottom:0},children:"\u5b66\u5206"}),(0,o.jsx)("input",{value:r.credits,onChange:e=>g(r.id,{credits:e.target.value}),inputMode:"decimal",style:{width:"100%",padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.8rem",opacity:.6,marginBottom:0},children:"\u6210\u7ee9\u7c7b\u578b"}),(0,o.jsxs)("select",{value:r.scoreType,onChange:e=>g(r.id,{scoreType:e.target.value,score:""}),style:{width:"100%",padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)"},children:[(0,o.jsx)("option",{value:"percent",children:"\u767e\u5206\u5236"}),(0,o.jsx)("option",{value:"five",children:"\u4e94\u7ea7\u5236\uff08\u4e0d\u8ba1\u5165\uff09"}),(0,o.jsx)("option",{value:"passfail",children:"\u4e8c\u7ea7\u5236\uff08\u4e0d\u8ba1\u5165\uff09"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.8rem",opacity:.6,marginBottom:0},children:"\u6210\u7ee9"}),"percent"===r.scoreType&&(0,o.jsx)("input",{value:r.score,onChange:e=>g(r.id,{score:e.target.value}),inputMode:"decimal",placeholder:"0 - 100",style:{width:"100%",padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)"}}),"five"===r.scoreType&&(0,o.jsxs)("select",{value:r.score,onChange:e=>g(r.id,{score:e.target.value}),style:{width:"100%",padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)"},children:[(0,o.jsx)("option",{value:"",children:"\u8bf7\u9009\u62e9"}),n.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]}),"passfail"===r.scoreType&&(0,o.jsxs)("select",{value:r.score,onChange:e=>g(r.id,{score:e.target.value}),style:{width:"100%",padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)"},children:[(0,o.jsx)("option",{value:"",children:"\u8bf7\u9009\u62e9"}),(0,o.jsx)("option",{value:"pass",children:"\u901a\u8fc7"}),(0,o.jsx)("option",{value:"fail",children:"\u4e0d\u901a\u8fc7"})]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:10},children:[(0,o.jsxs)("div",{style:{display:"flex",gap:16,flexWrap:"wrap",fontSize:"0.92rem"},children:[(0,o.jsxs)("div",{children:["\u8bfe\u7a0b\u7ee9\u70b9: ",(0,o.jsx)("strong",{children:l(r.gp,2)})]}),!r.include&&(0,o.jsx)("div",{style:{opacity:.6},children:r.note})]}),(0,o.jsx)("button",{type:"button",className:"button button--secondary",onClick:()=>{return e=r.id,void i(i=>i.length<=1?i:i.filter(i=>i.id!==e));var e},disabled:e.length<=1,children:"\u5220\u9664"})]})]},r.id))}),(0,o.jsxs)("div",{style:{marginTop:12,padding:12,borderRadius:12,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-color-emphasis-200)"},children:[(0,o.jsx)("div",{style:{fontWeight:650,marginBottom:6},children:"\u7edf\u8ba1"}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:18},children:[(0,o.jsxs)("div",{children:["\u8ba1\u5165\u5b66\u5206: ",l(x.totalCredits,2)]}),(0,o.jsxs)("div",{children:["\u5e73\u5747 GPA: ",x.totalCredits>0?l(x.average,3):"-"]})]})]}),(0,o.jsxs)("div",{style:{marginTop:12},children:[(0,o.jsx)("div",{style:{fontWeight:650,marginBottom:6},children:"\u8bfe\u7a0b GPA"}),(0,o.jsx)("div",{style:{display:"grid",gap:6},children:x.rows.map(e=>(0,o.jsxs)("div",{style:{border:"1px solid var(--ifm-color-emphasis-200)",borderRadius:10,padding:"8px 10px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:8},children:[(0,o.jsx)("div",{style:{fontWeight:600},children:e.course||`\u8bfe\u7a0b${e.id}`}),(0,o.jsxs)("div",{style:{display:"flex",gap:14,flexWrap:"wrap",fontSize:"0.9rem"},children:[(0,o.jsxs)("div",{children:["\u5b66\u5206: ",l(e.credits,2)]}),(0,o.jsxs)("div",{children:["\u8bfe\u7a0b\u7ee9\u70b9: ",l(e.gp,3)]})]})]},e.id))})]}),(0,o.jsx)("div",{style:{marginTop:12,fontSize:"0.85rem",opacity:.65,lineHeight:1.6},children:"\u767e\u5206\u5236\u7ee9\u70b9\u516c\u5f0f\uff1a\u8bfe\u7a0b\u7ee9\u70b9 = 4 - 3(100 - X)^2 / 1600\uff0860 \u2264 X \u2264 100\uff09\u300260 \u5206\u4ee5\u4e0b\u7ee9\u70b9\u4e3a 0\u3002 \u4e94\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206\uff1b\u4e8c\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206\u3002"}),r&&(0,o.jsxs)("div",{role:"dialog","aria-modal":"false",style:{position:"fixed",right:0===c.x?24:"auto",bottom:0===c.y?24:"auto",left:0!==c.x?c.x:"auto",top:0!==c.y?c.y:"auto",width:"min(560px, 92vw)",maxHeight:"70vh",background:"#f0f0f0",borderRadius:12,border:"1px solid #bfbfbf",padding:12,boxShadow:"0 10px 30px rgba(0,0,0,0.2)",overflow:"auto",zIndex:999},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10,cursor:"move",paddingBottom:8,borderBottom:"1px dashed #bfbfbf",marginBottom:10,userSelect:"none"},onMouseDown:e=>{u.current.dragging=!0,u.current.offsetX=e.clientX-(c.x||window.innerWidth-24-560),u.current.offsetY=e.clientY-(c.y||window.innerHeight-24-300)},children:[(0,o.jsx)("div",{style:{fontWeight:700},children:"GPA \u5206\u6570\u5bf9\u7167\u8868\uff08100\u201360\uff09"}),(0,o.jsx)("button",{type:"button",className:"button button--secondary",onClick:()=>d(!1),children:"\u5173\u95ed"})]}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:0,border:"1px solid #bfbfbf",borderRadius:8,overflow:"hidden",background:"#f0f0f0"},children:f.map(e=>(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85rem",padding:"6px 8px",background:"#f0f0f0",borderRight:"1px solid #bfbfbf",borderBottom:"1px solid #bfbfbf"},children:[(0,o.jsx)("span",{children:e}),(0,o.jsx)("span",{style:{fontWeight:700},children:l(a(e),3)})]},e))}),(0,o.jsx)("div",{style:{fontSize:"0.85rem",opacity:.6,marginTop:10},children:"\u4e94\u7ea7\u5236\u4e0e\u4e8c\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206"})]})]})}}}]);