"use strict";(globalThis.webpackChunksoft_where=globalThis.webpackChunksoft_where||[]).push([[2112],{5074(e,i,r){r.r(i),r.d(i,{default:()=>c});var o=r(6540),t=r(4848);const n={id:1,course:"\u8bfe\u7a0b1",credits:"",scoreType:"percent",score:"90"},s=[{label:"\u4f18\u79c0",value:"excellent"},{label:"\u826f\u597d",value:"good"},{label:"\u4e2d\u7b49",value:"medium"},{label:"\u53ca\u683c",value:"pass"},{label:"\u4e0d\u53ca\u683c",value:"fail"}];function d(e,i,r){return Number.isNaN(e)?i:Math.min(r,Math.max(i,e))}function a(e){if(!Number.isFinite(e))return 0;if(e<60)return 0;const i=d(e,60,100);return d(4-3*Math.pow(100-i,2)/1600,0,4)}function l(e,i=2){return Number.isFinite(e)?e.toFixed(i):"-"}function c(){const[e,i]=(0,o.useState)([n]),[r,d]=(0,o.useState)(!1),[c,p]=(0,o.useState)({x:0,y:0}),u=(0,o.useRef)({dragging:!1,offsetX:0,offsetY:0}),g=(0,o.useMemo)(()=>Array.from({length:41},(e,i)=>100-i),[]);(0,o.useEffect)(()=>{if("undefined"!=typeof window)try{const e=window.localStorage.getItem("tool:gpa:rows");if(!e)return;const r=JSON.parse(e);Array.isArray(r)&&r.length&&i(r.map(e=>({...e,credits:0===e.credits||"0"===e.credits||null==e.credits?"":e.credits})))}catch(e){}},[]),(0,o.useEffect)(()=>{if("undefined"!=typeof window)try{window.localStorage.setItem("tool:gpa:rows",JSON.stringify(e))}catch(i){}},[e]),(0,o.useEffect)(()=>{if(r)return window.addEventListener("mousemove",e),window.addEventListener("mouseup",i),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i)};function e(e){u.current.dragging&&p({x:e.clientX-u.current.offsetX,y:e.clientY-u.current.offsetY})}function i(){u.current.dragging=!1}},[r]);const x=(0,o.useMemo)(()=>{const i=e.map(e=>{const i=Number(e.credits),r=Number.isFinite(i)&&i>0?i:0;let o=0,t=!1,n="";if("percent"===e.scoreType){const i=Number(e.score);o=Number.isFinite(i)?i<60?0:a(i):0,t=Number.isFinite(i)&&r>0}else n=(e.scoreType,"\u4e0d\u8ba1\u5165\u5747\u5206");const s=t?o*r:0;return{...e,credits:r,gp:o,include:t,qualityPoints:s,note:n}});let r=0,o=0,t=0,n=0,s=0,d=0;return i.forEach(e=>{e.include&&(r+=e.credits,o+=e.qualityPoints),e.include&&(t+=e.gp,n+=1,s+=e.gp*e.credits,d+=e.credits)}),{rows:i,totalCredits:r,totalQualityPoints:o,average:r>0?o/r:0,avgScore:n>0?t/n:0,weightedScore:d>0?s/d:0}},[e]);function f(e,r){i(i=>i.map(i=>i.id===e?{...i,...r}:i))}return(0,t.jsxs)("div",{style:{padding:18},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"flex-start",marginBottom:6},children:[(0,t.jsx)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:(0,t.jsx)("button",{type:"button",className:"button button--primary",onClick:function(){i(e=>{const i=e.length?Math.max(...e.map(e=>e.id))+1:1;return[...e,{...n,id:i,course:`\u8bfe\u7a0b${i}`}]})},children:"\u6dfb\u52a0\u8bfe\u7a0b"})}),(0,t.jsx)("button",{type:"button",onClick:()=>d(e=>!e),"aria-label":"GPA \u5bf9\u7167\u8868",style:{width:28,height:28,borderRadius:999,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",cursor:"pointer",fontWeight:700,lineHeight:"24px",padding:0},children:"?"})]}),(0,t.jsx)("div",{style:{display:"grid",gap:8,marginTop:-4},children:x.rows.map(r=>(0,t.jsxs)("div",{style:{border:"1px solid var(--ifm-color-emphasis-200)",borderRadius:10,padding:"6px 4px",display:"grid",alignItems:"center",gap:4,gridTemplateColumns:"minmax(110px, 1.1fr) 90px 130px 130px minmax(360px, 1fr)"},children:[(0,t.jsx)("input",{value:r.course,onChange:e=>f(r.id,{course:e.target.value}),placeholder:`\u8bfe\u7a0b${r.id}`,style:{minWidth:110,flex:"1 1 130px",padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",height:34,boxSizing:"border-box"}}),(0,t.jsx)("input",{value:0===r.credits||"0"===r.credits?"":r.credits,onChange:e=>f(r.id,{credits:e.target.value}),inputMode:"decimal",placeholder:"\u586b\u5199\u5b66\u5206",style:{width:90,padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",height:34,boxSizing:"border-box"}}),(0,t.jsxs)("select",{value:r.scoreType,onChange:e=>f(r.id,{scoreType:e.target.value,score:""}),style:{width:130,padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",height:34,boxSizing:"border-box"},children:[(0,t.jsx)("option",{value:"percent",children:"\u767e\u5206\u5236"}),(0,t.jsx)("option",{value:"five",children:"\u4e94\u7ea7\u5236"}),(0,t.jsx)("option",{value:"passfail",children:"\u4e8c\u7ea7\u5236"})]}),"percent"===r.scoreType&&(0,t.jsx)("input",{value:r.score,onChange:e=>f(r.id,{score:e.target.value}),inputMode:"decimal",placeholder:"\u586b\u5199\u6210\u7ee9",style:{width:130,padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",height:34,boxSizing:"border-box"}}),"five"===r.scoreType&&(0,t.jsxs)("select",{value:r.score,onChange:e=>f(r.id,{score:e.target.value}),style:{width:130,padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",height:34,boxSizing:"border-box"},children:[(0,t.jsx)("option",{value:"",children:"\u586b\u5199\u6210\u7ee9"}),s.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),"passfail"===r.scoreType&&(0,t.jsxs)("select",{value:r.score,onChange:e=>f(r.id,{score:e.target.value}),style:{width:130,padding:"6px 8px",borderRadius:8,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",height:34,boxSizing:"border-box"},children:[(0,t.jsx)("option",{value:"",children:"\u586b\u5199\u6210\u7ee9"}),(0,t.jsx)("option",{value:"pass",children:"\u901a\u8fc7"}),(0,t.jsx)("option",{value:"fail",children:"\u4e0d\u901a\u8fc7"})]}),(0,t.jsxs)("div",{style:{display:"grid",alignItems:"center",gap:10,gridTemplateColumns:"auto 120px auto",whiteSpace:"nowrap"},children:[(0,t.jsxs)("div",{style:{fontSize:"0.92rem"},children:["GPA: ",(0,t.jsx)("strong",{children:l(r.gp,2)})]}),(0,t.jsx)("button",{type:"button",className:"button button--secondary",onClick:()=>{return e=r.id,void i(i=>i.length<=1?i:i.filter(i=>i.id!==e));var e},disabled:e.length<=1,style:{height:34,padding:"0 12px"},children:"\u5220\u9664"})]})]},r.id))}),(0,t.jsxs)("div",{style:{marginTop:12,padding:12,borderRadius:12,border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-color-emphasis-200)"},children:[(0,t.jsx)("div",{style:{fontWeight:650,marginBottom:6},children:"\u7edf\u8ba1"}),(0,t.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:18},children:[(0,t.jsxs)("div",{children:["\u8ba1\u5165\u5b66\u5206: ",l(x.totalCredits,2)]}),(0,t.jsxs)("div",{children:["\u5e73\u5747 GPA: ",x.totalCredits>0?l(x.average,3):"-"]}),(0,t.jsxs)("div",{children:["\u7b97\u6570 GPA: ",x.avgScore>0?l(x.avgScore,2):"-"]}),(0,t.jsxs)("div",{children:["\u52a0\u6743 GPA: ",x.weightedScore>0?l(x.weightedScore,2):"-"]})]})]}),(0,t.jsx)("div",{style:{marginTop:12,fontSize:"0.85rem",opacity:.65,lineHeight:1.6},children:"\u767e\u5206\u5236\u7ee9\u70b9\u516c\u5f0f\uff1a\u8bfe\u7a0b\u7ee9\u70b9 = 4 - 3(100 - X)^2 / 1600\uff0860 \u2264 X \u2264 100\uff09\u300260 \u5206\u4ee5\u4e0b\u7ee9\u70b9\u4e3a 0\u3002 \u4e94\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206\uff1b\u4e8c\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206\u3002"}),r&&(0,t.jsxs)("div",{role:"dialog","aria-modal":"false",style:{position:"fixed",right:0===c.x?24:"auto",bottom:0===c.y?24:"auto",left:0!==c.x?c.x:"auto",top:0!==c.y?c.y:"auto",width:"min(560px, 92vw)",maxHeight:"70vh",background:"#f0f0f0",borderRadius:12,border:"1px solid #bfbfbf",padding:12,boxShadow:"0 10px 30px rgba(0,0,0,0.2)",overflow:"auto",zIndex:999},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10,cursor:"move",paddingBottom:8,borderBottom:"1px dashed #bfbfbf",marginBottom:10,userSelect:"none"},onMouseDown:e=>{u.current.dragging=!0,u.current.offsetX=e.clientX-(c.x||window.innerWidth-24-560),u.current.offsetY=e.clientY-(c.y||window.innerHeight-24-300)},children:[(0,t.jsx)("div",{style:{fontWeight:700},children:"GPA \u5206\u6570\u5bf9\u7167\u8868\uff08100\u201360\uff09"}),(0,t.jsx)("button",{type:"button",className:"button button--secondary",onClick:()=>d(!1),children:"\u5173\u95ed"})]}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:0,border:"1px solid #bfbfbf",borderRadius:8,overflow:"hidden",background:"#f0f0f0"},children:g.map(e=>(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85rem",padding:"6px 8px",background:"#f0f0f0",borderRight:"1px solid #bfbfbf",borderBottom:"1px solid #bfbfbf"},children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)("span",{style:{fontWeight:700},children:l(a(e),3)})]},e))}),(0,t.jsx)("div",{style:{fontSize:"0.85rem",opacity:.6,marginTop:10},children:"\u4e94\u7ea7\u5236\u4e0e\u4e8c\u7ea7\u5236\u4e0d\u8ba1\u5165\u5747\u5206"})]})]})}}}]);